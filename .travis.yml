language: android
android:
  components:
    - tools
    - platform-tools
    # Note that the tools section appears twice on purpose as itâ€™s required to get the newest Android SDK tools.
    - tools
    - build-tools-$BUILD_TOOLS
    - android-$ANDROID_VERSION

    # Ensure some components are always there
    - extra-android-support
    - extra-google-google_play_services
    - extra-google-m2repository
    - extra-android-m2repository

    # Emulator images
    - sys-img-$ANDROID_ABI-android-$ANDROID_VERSION

  env:
    matrix:
      - BUILD_TOOLS=26.0.2  ANDROID_VERSION=26  ANDROID_ABI=armeabi-v7a

  # Emulator Management: Create, Start and Wait
  before_script:
    - echo no | android create avd --force -n test -t android-$ANDROID_VERSION --abi $ANDROID_ABI
    - emulator -avd test -no-audio -no-window &
    - android-wait-for-emulator
    - adb shell input keyevent 82 &